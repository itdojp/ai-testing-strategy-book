<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: 'Noto Sans JP', sans-serif; font-size: 20px; font-weight: bold; fill: #2c3e50; }
      .stage-title { font-family: 'Noto Sans JP', sans-serif; font-size: 12px; font-weight: bold; fill: #fff; }
      .component-text { font-family: 'Noto Sans JP', sans-serif; font-size: 10px; fill: #2c3e50; }
      .small-text { font-family: 'Noto Sans JP', sans-serif; font-size: 9px; fill: #7f8c8d; }
      .data-stage { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .model-stage { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .deploy-stage { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .monitor-stage { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .component-box { fill: #fff; stroke: #95a5a6; stroke-width: 1; }
      .flow-arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .feedback-arrow { stroke: #e74c3c; stroke-width: 2; stroke-dasharray: 5,3; fill: none; marker-end: url(#arrowhead-red); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" class="title" text-anchor="middle">MLOps パイプライン</text>

  <!-- Data Stage -->
  <g id="data-stage">
    <rect x="50" y="80" width="150" height="200" class="data-stage" rx="10"/>
    <text x="125" y="105" class="stage-title" text-anchor="middle">データステージ</text>
    
    <rect x="65" y="120" width="120" height="35" class="component-box" rx="3"/>
    <text x="125" y="140" class="component-text" text-anchor="middle">データ収集</text>
    <text x="125" y="150" class="small-text" text-anchor="middle">バッチ/ストリーミング</text>
    
    <rect x="65" y="165" width="120" height="35" class="component-box" rx="3"/>
    <text x="125" y="185" class="component-text" text-anchor="middle">データ検証</text>
    <text x="125" y="195" class="small-text" text-anchor="middle">品質チェック</text>
    
    <rect x="65" y="210" width="120" height="35" class="component-box" rx="3"/>
    <text x="125" y="230" class="component-text" text-anchor="middle">前処理・変換</text>
    <text x="125" y="240" class="small-text" text-anchor="middle">特徴量エンジニアリング</text>
    
    <rect x="65" y="255" width="120" height="20" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="3"/>
    <text x="125" y="268" class="small-text" text-anchor="middle">データバージョニング</text>
  </g>

  <!-- Model Stage -->
  <g id="model-stage">
    <rect x="250" y="80" width="150" height="200" class="model-stage" rx="10"/>
    <text x="325" y="105" class="stage-title" text-anchor="middle">モデルステージ</text>
    
    <rect x="265" y="120" width="120" height="35" class="component-box" rx="3"/>
    <text x="325" y="140" class="component-text" text-anchor="middle">モデル開発</text>
    <text x="325" y="150" class="small-text" text-anchor="middle">実験管理</text>
    
    <rect x="265" y="165" width="120" height="35" class="component-box" rx="3"/>
    <text x="325" y="185" class="component-text" text-anchor="middle">学習・評価</text>
    <text x="325" y="195" class="small-text" text-anchor="middle">ハイパーパラメータ調整</text>
    
    <rect x="265" y="210" width="120" height="35" class="component-box" rx="3"/>
    <text x="325" y="230" class="component-text" text-anchor="middle">モデル検証</text>
    <text x="325" y="240" class="small-text" text-anchor="middle">精度・バイアス評価</text>
    
    <rect x="265" y="255" width="120" height="20" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="3"/>
    <text x="325" y="268" class="small-text" text-anchor="middle">モデルレジストリ</text>
  </g>

  <!-- Deployment Stage -->
  <g id="deploy-stage">
    <rect x="450" y="80" width="150" height="200" class="deploy-stage" rx="10"/>
    <text x="525" y="105" class="stage-title" text-anchor="middle">デプロイステージ</text>
    
    <rect x="465" y="120" width="120" height="35" class="component-box" rx="3"/>
    <text x="525" y="140" class="component-text" text-anchor="middle">モデルサービング</text>
    <text x="525" y="150" class="small-text" text-anchor="middle">REST API/gRPC</text>
    
    <rect x="465" y="165" width="120" height="35" class="component-box" rx="3"/>
    <text x="525" y="185" class="component-text" text-anchor="middle">A/Bテスト</text>
    <text x="525" y="195" class="small-text" text-anchor="middle">カナリアデプロイ</text>
    
    <rect x="465" y="210" width="120" height="35" class="component-box" rx="3"/>
    <text x="525" y="230" class="component-text" text-anchor="middle">スケーリング</text>
    <text x="525" y="240" class="small-text" text-anchor="middle">自動スケール</text>
    
    <rect x="465" y="255" width="120" height="20" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="3"/>
    <text x="525" y="268" class="small-text" text-anchor="middle">エッジデプロイ</text>
  </g>

  <!-- Monitoring Stage -->
  <g id="monitor-stage">
    <rect x="650" y="80" width="150" height="200" class="monitor-stage" rx="10"/>
    <text x="725" y="105" class="stage-title" text-anchor="middle">監視ステージ</text>
    
    <rect x="665" y="120" width="120" height="35" class="component-box" rx="3"/>
    <text x="725" y="140" class="component-text" text-anchor="middle">パフォーマンス監視</text>
    <text x="725" y="150" class="small-text" text-anchor="middle">レイテンシ・スループット</text>
    
    <rect x="665" y="165" width="120" height="35" class="component-box" rx="3"/>
    <text x="725" y="185" class="component-text" text-anchor="middle">データドリフト検知</text>
    <text x="725" y="195" class="small-text" text-anchor="middle">分布変化監視</text>
    
    <rect x="665" y="210" width="120" height="35" class="component-box" rx="3"/>
    <text x="725" y="230" class="component-text" text-anchor="middle">モデル劣化検知</text>
    <text x="725" y="240" class="small-text" text-anchor="middle">精度モニタリング</text>
    
    <rect x="665" y="255" width="120" height="20" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="3"/>
    <text x="725" y="268" class="small-text" text-anchor="middle">アラート・通知</text>
  </g>

  <!-- Flow Arrows -->
  <path d="M 200 180 L 250 180" class="flow-arrow"/>
  <path d="M 400 180 L 450 180" class="flow-arrow"/>
  <path d="M 600 180 L 650 180" class="flow-arrow"/>

  <!-- Feedback Loop -->
  <path d="M 725 280 Q 725 350 400 350 Q 125 350 125 280" class="feedback-arrow"/>
  <text x="425" y="370" class="component-text" text-anchor="middle">継続的改善フィードバックループ</text>

  <!-- CI/CD Pipeline -->
  <g id="cicd">
    <rect x="50" y="400" width="750" height="80" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="5"/>
    <text x="425" y="420" class="stage-title" text-anchor="middle" fill="#2c3e50">CI/CD パイプライン</text>
    
    <rect x="70" y="430" width="100" height="35" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="3"/>
    <text x="120" y="450" class="component-text" text-anchor="middle" fill="#fff">ソース管理</text>
    <text x="120" y="460" class="small-text" text-anchor="middle" fill="#fff">Git</text>
    
    <rect x="190" y="430" width="100" height="35" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="3"/>
    <text x="240" y="450" class="component-text" text-anchor="middle" fill="#fff">ビルド</text>
    <text x="240" y="460" class="small-text" text-anchor="middle" fill="#fff">Docker</text>
    
    <rect x="310" y="430" width="100" height="35" fill="#e74c3c" stroke="#c0392b" stroke-width="1" rx="3"/>
    <text x="360" y="450" class="component-text" text-anchor="middle" fill="#fff">テスト</text>
    <text x="360" y="460" class="small-text" text-anchor="middle" fill="#fff">自動テスト</text>
    
    <rect x="430" y="430" width="100" height="35" fill="#f39c12" stroke="#e67e22" stroke-width="1" rx="3"/>
    <text x="480" y="450" class="component-text" text-anchor="middle" fill="#fff">承認</text>
    <text x="480" y="460" class="small-text" text-anchor="middle" fill="#fff">手動/自動</text>
    
    <rect x="550" y="430" width="100" height="35" fill="#2ecc71" stroke="#27ae60" stroke-width="1" rx="3"/>
    <text x="600" y="450" class="component-text" text-anchor="middle" fill="#fff">デプロイ</text>
    <text x="600" y="460" class="small-text" text-anchor="middle" fill="#fff">本番環境</text>
    
    <rect x="670" y="430" width="100" height="35" fill="#34495e" stroke="#2c3e50" stroke-width="1" rx="3"/>
    <text x="720" y="450" class="component-text" text-anchor="middle" fill="#fff">監視</text>
    <text x="720" y="460" class="small-text" text-anchor="middle" fill="#fff">ログ・メトリクス</text>
  </g>

  <!-- Tools and Technologies -->
  <g id="tools">
    <rect x="50" y="500" width="750" height="80" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
    <text x="425" y="520" class="component-text" text-anchor="middle" font-weight="bold">主要ツール・技術スタック</text>
    
    <text x="125" y="540" class="small-text" text-anchor="middle">データ: DVC, Feast</text>
    <text x="125" y="555" class="small-text" text-anchor="middle">Apache Airflow</text>
    
    <text x="325" y="540" class="small-text" text-anchor="middle">ML: MLflow, Kubeflow</text>
    <text x="325" y="555" class="small-text" text-anchor="middle">TensorFlow, PyTorch</text>
    
    <text x="525" y="540" class="small-text" text-anchor="middle">デプロイ: Seldon, BentoML</text>
    <text x="525" y="555" class="small-text" text-anchor="middle">Kubernetes, Docker</text>
    
    <text x="725" y="540" class="small-text" text-anchor="middle">監視: Prometheus</text>
    <text x="725" y="555" class="small-text" text-anchor="middle">Grafana, ELK Stack</text>
  </g>
</svg>