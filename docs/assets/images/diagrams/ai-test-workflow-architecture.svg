<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>AIテストワークフローアーキテクチャ</title>
  <desc>AI生成コードのテストプロセス全体と人間とAIの協働ポイントを示すワークフロー図</desc>
  <defs>
    <style>
      :root {
        --svg-bg: #ffffff;
        --svg-text: #1a1a1a;
        --svg-primary: #0066cc;
        --svg-success: #16a34a;
        --svg-warning: #ca8a04;
        --svg-error: #dc2626;
        --svg-neutral: #6b7280;
      }
      .title-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 16px; font-weight: 600; fill: var(--svg-text); }
      .section-title { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 12px; font-weight: 500; fill: var(--svg-text); }
      .step-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 12px; font-weight: 400; fill: var(--svg-text); }
      .annotation-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 10px; font-weight: 400; fill: var(--svg-neutral); }
      .ai-box { fill: var(--svg-primary); fill-opacity: 0.1; stroke: var(--svg-primary); stroke-width: 2; }
      .human-box { fill: var(--svg-warning); fill-opacity: 0.1; stroke: var(--svg-warning); stroke-width: 2; }
      .process-box { fill: var(--svg-success); fill-opacity: 0.1; stroke: var(--svg-success); stroke-width: 2; }
      .quality-box { fill: var(--svg-error); fill-opacity: 0.1; stroke: var(--svg-error); stroke-width: 2; }
      .flow-arrow { stroke: var(--svg-primary); stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .collaboration-line { stroke: var(--svg-warning); stroke-width: 2; stroke-dasharray: 5,3; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="var(--svg-primary)"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="50" class="title-text" text-anchor="middle">AIテストワークフローアーキテクチャ</text>

  <!-- AI Generation Phase -->
  <g id="ai-generation">
    <rect x="60" y="80" width="160" height="80" class="ai-box" rx="4"/>
    <text x="140" y="100" class="section-title" text-anchor="middle">AI生成フェーズ</text>
    <text x="70" y="120" class="step-text">• GitHub Copilot</text>
    <text x="70" y="135" class="step-text">• ChatGPT/Claude</text>
    <text x="70" y="150" class="step-text">• コード生成</text>
  </g>

  <!-- Human Review Phase -->
  <g id="human-review">
    <rect x="260" y="80" width="160" height="80" class="human-box" rx="4"/>
    <text x="340" y="100" class="section-title" text-anchor="middle">人間レビュー</text>
    <text x="270" y="120" class="step-text">• コード品質確認</text>
    <text x="270" y="135" class="step-text">• ロジック検証</text>
    <text x="270" y="150" class="step-text">• 要件適合性チェック</text>
  </g>

  <!-- Automated Testing Phase -->
  <g id="automated-testing">
    <rect x="460" y="80" width="160" height="80" class="process-box" rx="4"/>
    <text x="540" y="100" class="section-title" text-anchor="middle">自動テスト実行</text>
    <text x="470" y="120" class="step-text">• ユニットテスト</text>
    <text x="470" y="135" class="step-text">• 統合テスト</text>
    <text x="470" y="150" class="step-text">• セキュリティテスト</text>
  </g>

  <!-- Quality Assessment -->
  <g id="quality-assessment">
    <rect x="660" y="80" width="120" height="80" class="quality-box" rx="4"/>
    <text x="720" y="100" class="section-title" text-anchor="middle">品質評価</text>
    <text x="670" y="120" class="step-text">• カバレッジ</text>
    <text x="670" y="135" class="step-text">• パフォーマンス</text>
    <text x="670" y="150" class="step-text">• 信頼性</text>
  </g>

  <!-- Test Strategy Layer -->
  <g id="test-strategy">
    <rect x="80" y="200" width="640" height="120" fill="var(--svg-neutral)" fill-opacity="0.05" stroke="var(--svg-text)" stroke-width="2" rx="4"/>
    <text x="400" y="220" class="section-title" text-anchor="middle">テスト戦略レイヤー</text>
    
    <!-- Unit Testing -->
    <rect x="100" y="240" width="120" height="60" class="process-box" rx="4"/>
    <text x="160" y="260" class="step-text" text-anchor="middle" font-weight="500">ユニットテスト</text>
    <text x="160" y="275" class="annotation-text" text-anchor="middle">• Jest/Pytest</text>
    <text x="160" y="290" class="annotation-text" text-anchor="middle">• Mock/Stub</text>
    
    <!-- Integration Testing -->
    <rect x="240" y="240" width="120" height="60" class="process-box" rx="4"/>
    <text x="300" y="260" class="step-text" text-anchor="middle" font-weight="500">統合テスト</text>
    <text x="300" y="275" class="annotation-text" text-anchor="middle">• API テスト</text>
    <text x="300" y="290" class="annotation-text" text-anchor="middle">• E2E テスト</text>
    
    <!-- Performance Testing -->
    <rect x="380" y="240" width="120" height="60" class="process-box" rx="4"/>
    <text x="440" y="260" class="step-text" text-anchor="middle" font-weight="500">パフォーマンス</text>
    <text x="440" y="275" class="annotation-text" text-anchor="middle">• 負荷テスト</text>
    <text x="440" y="290" class="annotation-text" text-anchor="middle">• ベンチマーク</text>
    
    <!-- Security Testing -->
    <rect x="520" y="240" width="120" height="60" class="process-box" rx="4"/>
    <text x="580" y="260" class="step-text" text-anchor="middle" font-weight="500">セキュリティ</text>
    <text x="580" y="275" class="annotation-text" text-anchor="middle">• SAST/DAST</text>
    <text x="580" y="290" class="annotation-text" text-anchor="middle">• 脆弱性検査</text>
  </g>

  <!-- Collaboration Points -->
  <g id="collaboration">
    <rect x="150" y="350" width="500" height="100" fill="var(--svg-warning)" fill-opacity="0.05" stroke="var(--svg-warning)" stroke-width="2" rx="4"/>
    <text x="400" y="370" class="section-title" text-anchor="middle">人間とAIの協働ポイント</text>
    
    <text x="170" y="390" class="step-text" font-weight="500">1. コード生成時の要件伝達</text>
    <text x="180" y="405" class="annotation-text">• プロンプトエンジニアリング</text>
    <text x="180" y="420" class="annotation-text">• コンテキスト設定</text>
    
    <text x="400" y="390" class="step-text" font-weight="500">2. 品質保証プロセス</text>
    <text x="410" y="405" class="annotation-text">• 手動レビュー + 自動検査</text>
    <text x="410" y="420" class="annotation-text">• フィードバックループ</text>
    
    <text x="580" y="390" class="step-text" font-weight="500">3. 継続的改善</text>
    <text x="590" y="405" class="annotation-text">• テスト戦略最適化</text>
    <text x="590" y="420" class="annotation-text">• プロセス改善</text>
  </g>

  <!-- Quality Metrics Dashboard -->
  <g id="metrics">
    <rect x="100" y="480" width="600" height="80" fill="var(--svg-error)" fill-opacity="0.05" stroke="var(--svg-error)" stroke-width="2" rx="4"/>
    <text x="400" y="500" class="section-title" text-anchor="middle">品質メトリクス</text>
    
    <text x="130" y="520" class="step-text">• テストカバレッジ: 85%+</text>
    <text x="130" y="535" class="step-text">• バグ検出率: 95%+</text>
    <text x="130" y="550" class="annotation-text">従来手法との比較</text>
    
    <text x="350" y="520" class="step-text">• コード品質スコア</text>
    <text x="350" y="535" class="step-text">• 保守性指標</text>
    <text x="350" y="550" class="annotation-text">自動評価システム</text>
    
    <text x="550" y="520" class="step-text">• パフォーマンス指標</text>
    <text x="550" y="535" class="step-text">• セキュリティレベル</text>
    <text x="550" y="550" class="annotation-text">リアルタイム監視</text>
  </g>

  <!-- Flow Arrows -->
  <path d="M 220 120 L 260 120" class="flow-arrow"/>
  <path d="M 420 120 L 460 120" class="flow-arrow"/>
  <path d="M 620 120 L 660 120" class="flow-arrow"/>
  
  <!-- Collaboration Lines -->
  <path d="M 140 160 L 140 200" class="collaboration-line"/>
  <path d="M 340 160 L 340 200" class="collaboration-line"/>
  <path d="M 540 160 L 540 200" class="collaboration-line"/>
  <path d="M 720 160 L 720 200" class="collaboration-line"/>
</svg>